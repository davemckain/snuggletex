# Defines single-line tests of basic up-conversion of Presentation MathML.
#
# Input format is:
#
# LaTeX (interpreted inside $...$)
# Resulting child content of MathML <math/> element
# ==== (divider)
#
# Lines starting with '#' are documentation and are stripped out when running tests
#
## Normal tests
1
<mn>1</mn>
====
\alpha
<mi>&#x3b1;</mi>
=====
x = 3
<mi>x</mi><mo>=</mo><mn>3</mn>
====
1+x = 2
<mrow><mn>1</mn><mo>+</mo><mi>x</mi></mrow><mo>=</mo><mn>2</mn>
====
x
<mi>x</mi>
====
-x
<mo>-</mo><mi>x</mi>
====
1+x
<mn>1</mn><mo>+</mo><mi>x</mi>
====
-x+1
<mrow><mo>-</mo><mi>x</mi></mrow><mo>+</mo><mn>1</mn>
====
2x
<mn>2</mn><mo>&#x2062;</mo><mi>x</mi>
====
(2x)
<mfenced open='(' close=')'><mrow><mn>2</mn><mo>&#x2062;</mo><mi>x</mi></mrow></mfenced>
====
a/b
<mi>a</mi><mo>/</mo><mi>b</mi>
====
a/b/c
<mrow><mi>a</mi><mo>/</mo><mi>b</mi></mrow><mo>/</mo><mi>c</mi>
====
\sin x
<mi>sin</mi><mo>&#x2061;</mo><mi>x</mi>
====
2\alpha
<mn>2</mn>
<mo>&#x2062;</mo>
<mi>&#x3b1;</mi>
====
2x+4
<mrow>
  <mn>2</mn>
  <mo>&#x2062;</mo>
  <mi>x</mi>
</mrow>
<mo>+</mo>
<mn>4</mn>
====
2\alpha - \sin y + x
<mrow>
  <mrow>
    <mn>2</mn>
    <mo>&#x2062;</mo>
    <mi>&#x3b1;</mi>
  </mrow>
  <mo>-</mo>
  <mrow>
    <mi>sin</mi>
    <mo>&#x2061;</mo>
    <mi>y</mi>
  </mrow>
</mrow>
<mo>+</mo>
<mi>x</mi>
====
\frac{1}{2}
<mfrac>
  <mn>1</mn>
  <mn>2</mn>
</mfrac>
====
\frac{x+y}{2}
<mfrac>
  <mrow>
    <mi>x</mi>
    <mo>+</mo>
    <mi>y</mi>
  </mrow>
  <mn>2</mn>
</mfrac>
====
\sqrt x
<msqrt><mi>x</mi></msqrt>
====
\sqrt x y
<msqrt><mi>x</mi></msqrt><mo>&#x2062;</mo><mi>y</mi>
====
\sqrt{b^2-4ac}
<msqrt><msup><mi>b</mi><mn>2</mn></msup><mo>-</mo><mrow><mn>4</mn><mo>&#x2062;</mo><mi>a</mi><mo>&#x2062;</mo><mi>c</mi></mrow></msqrt>
====
## The Quadractic Equation (phew!)
\frac{-b+\sqrt{b^2-4ac}}{2a}
<mfrac>
  <mrow>
    <mrow>
      <mo>-</mo>
      <mi>b</mi>
    </mrow>
    <mo>+</mo>
    <msqrt>
      <msup>
        <mi>b</mi>
        <mn>2</mn>
      </msup>
      <mo>-</mo>
      <mrow>
        <mn>4</mn>
        <mo>&#x2062;</mo>
        <mi>a</mi>
        <mo>&#x2062;</mo>
        <mi>c</mi>
      </mrow>
    </msqrt>
  </mrow>
  <mrow>
    <mn>2</mn>
    <mo>&#x2062;</mo>
    <mi>a</mi>
  </mrow>
</mfrac>
====
\sqrt[3]{x}
<mroot><mi>x</mi><mn>3</mn></mroot>
====
x^2 + 1
<msup>
  <mi>x</mi>
  <mn>2</mn>
</msup>
<mo>+</mo>
<mn>1</mn>
====
# Any kind of space is kept but suppresses an implicit multiplcation before it. Anything following
# will still get an implicit multiplication, which makes sense I think.
\,
<mspace width="0.167em"/>
====
x\,y
<mi>x</mi><mspace width="0.167em"/><mo>&#x2062;</mo><mi>y</mi>
====
x\,y\,z
<mi>x</mi><mspace width="0.167em"/><mo>&#x2062;</mo><mi>y</mi><mspace width="0.167em"/><mo>&#x2062;</mo><mi>z</mi>
====
\sin x\,y
<mrow><mi>sin</mi><mo>&#x2061;</mo><mi>x</mi></mrow><mspace width="0.167em"/><mo>&#x2062;</mo><mi>y</mi>
====
#########################
# Tests various "empty" cases
\frac{}{}
<mfrac><mrow/><mrow/></mfrac>
====
## Test inference of apply function on inverses
\sin^{-1} x
<msup><mi>sin</mi><mn>-1</mn></msup><mo>&#x2061;</mo><mi>x</mi>
====
## Test inference of apply function on powers
\sin^{2} x
<msup><mi>sin</mi><mn>2</mn></msup><mo>&#x2061;</mo><mi>x</mi>
====
## Similarly we can let apply function work over subscripted logs, interpreted as bases.
\log_a x
<msub><mi>log</mi><mi>a</mi></msub><mo>&#x2061;</mo><mi>x</mi>
====
## Also do logs over bases with powers and inverses
\log_a^2 x
<msubsup><mi>log</mi><mi>a</mi><mn>2</mn></msubsup><mo>&#x2061;</mo><mi>x</mi>
====
#########################
## New improved prefix/infix/postfix handling
1++x
<mn>1</mn>
<mo>+</mo>
<mrow>
  <mo>+</mo>
  <mi>x</mi>
</mrow>
====
1+-x
<mn>1</mn>
<mo>+</mo>
<mrow>
  <mo>-</mo>
  <mi>x</mi>
</mrow>
====
1-+x
<mn>1</mn>
<mo>-</mo>
<mrow>
  <mo>+</mo>
  <mi>x</mi>
</mrow>
====
1+++x
<mn>1</mn>
<mo>+</mo>
<mrow>
  <mo>+</mo>
  <mrow>
    <mo>+</mo>
    <mi>x</mi>
  </mrow>
</mrow>
====
1---x
<mn>1</mn>
<mo>-</mo>
<mrow>
  <mo>-</mo>
  <mrow>
    <mo>-</mo>
    <mi>x</mi>
  </mrow>
</mrow>
====
## Bare operators are allowed
+
<mo>+</mo>
====
## Yes, this is pathological but currently allowed
1+
<mn>1</mn><mo>+</mo>
====
## This is pathological too, = is treated as a prefix operator here
=1
<mo>=</mo>
<mn>1</mn>
====
## Even more pathological!
++
<mo>+</mo>
<mo>+</mo>
====
++1
<mo>+</mo>
<mrow>
  <mo>+</mo>
  <mn>1</mn>
</mrow>
====
## Unapplied elementary functions are OK but need specified in an interesting way
\sin {}
<mi>sin</mi><mo>&#x2061;</mo><mrow/>
====
## c.f. above
\sin
<mi>sin</mi>
====
\sin^2
<msup><mi>sin</mi><mn>2</mn></msup>
====
\sin^2 {}
<msup><mi>sin</mi><mn>2</mn></msup><mo>&#x2061;</mo><mrow/>
====
\sin^{-1}
<msup><mi>sin</mi><mn>-1</mn></msup>
====
\sin^{-1} {}
<msup><mi>sin</mi><mn>-1</mn></msup><mo>&#x2061;</mo><mrow/>
====
\neg A
<mo>&#xac;</mo><mi>A</mi>
====
x!y!
<mrow>
  <mi>x</mi>
  <mo>!</mo>
</mrow>
<mo>&#x2062;</mo>
<mrow>
  <mi>y</mi>
  <mo>!</mo>
</mrow>
====
## The ! operator only binds to the preceding item
2x!
<mn>2</mn>
<mo>&#x2062;</mo>
<mrow>
  <mi>x</mi>
  <mo>!</mo>
</mrow>
====
\sin 2x!
<mi>sin</mi>
<mo>&#x2061;</mo>
<mrow>
  <mn>2</mn>
  <mo>&#x2062;</mo>
  <mrow>
    <mi>x</mi>
    <mo>!</mo>
  </mrow>
</mrow>
====
## As above
2x!!
<mn>2</mn>
<mo>&#x2062;</mo>
<mrow>
  <mrow>
    <mi>x</mi>
    <mo>!</mo>
  </mrow>
  <mo>!</mo>
</mrow>
====
## Lonely factorial
!
<mo>!</mo>
====
x^{!}
<msup><mi>x</mi><mo>!</mo></msup>
====
## I'm not sure about these ones yet...
#a\in A
#<mi>a</mi>
#<mo>&#x2208;</mo>
#<mi>A</mi>
#====
#a\not\in A
#<mi>a</mi>
#<mo>&#x2209;</mo>
#<mi>A</mi>
#====
